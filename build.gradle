plugins {
    id 'org.jetbrains.intellij' version '1.17.3'
    id 'java'
}

group = 'com.github.franciscode'
version = '1.12'

repositories {
    mavenCentral()
}

dependencies {
    testImplementation 'org.junit.jupiter:junit-jupiter-api:5.8.2'
    testRuntimeOnly 'org.junit.jupiter:junit-jupiter-engine:5.8.2'
}

intellij {
    version = '2025.1'
    pluginName = 'moonlight-theme'
}

patchPluginXml {
    sinceBuild = '241'
    untilBuild = '252.*'
    changeNotes = """
<h1>ğŸŒ™ Moonlight JetBrains Theme â€“ Version 1.12</h1>

<p><strong>ğŸ“… Release Date:</strong> August 4, 2025</p>

<h2>ğŸ› ï¸ Improvements & Fixes</h2>
<ul>
  <li>ğŸ¨ Fine-tuned color palette for better balance and harmony across the IDE.</li>
  <li>ğŸ“‚ Improved spacing in the project tree for enhanced readability.</li>
  <li>ğŸªŸ Polished panel backgrounds and UI contrast issues.</li>
  <li>ğŸ–Œï¸ Adjusted to better reflect the original Moonlight VS Code aesthetic.</li>
</ul>

<h2>ğŸš€ Try My New Theme!</h2>
<p>If you're enjoying Moonlight, don't miss my latest creation: <strong><a href="https://plugins.jetbrains.com/plugin/28084-vitesse-dark-theme" target="_blank">Vitesse Dark Theme</a></strong>. Inspired by the legendary Vitesse palette from Anthony Fu, it's sleek, fast, and beautifully high-contrast. Ideal for those who code with flair.</p>

<h2>ğŸ’¬ From Me to You</h2>
<p>As always, your support and feedback fuel this project. Visit <a href="https://github.com/franmc01" target="_blank">my GitHub</a> to share ideas, contribute, or leave a kind review.</p>

<p>Thank you for coding under the Moonlight ğŸŒ™<br>
â€“ Francisco Marin</p>
    """
    description = """
<p><strong>Moonlight Dark Theme</strong> is a carefully crafted dark theme for JetBrains IDEs, based on the popular VS Code Moonlight palette. Perfect for developers who appreciate color harmony, focus, and style.</p>
<ul>
  <li>ğŸŒ— Rich contrast with balanced accent hues</li>
  <li>ğŸ“ Readable project view spacing</li>
  <li>ğŸ¯ Polished editor, tabs, and panels</li>
</ul>
<p>âœ… Now fully compatible with IntelliJ IDEA 2025.1+</p>
"""
}

test {
    useJUnitPlatform()
}

// Disable searchable options task to avoid IndexOutOfBoundsException
tasks.buildSearchableOptions.enabled = false
